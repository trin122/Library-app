<div class="container-fluid py-4 bg-light min-vh-100">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold text-dark mb-0">
      <i class="bi bi-journal-text me-2 text-primary"></i>Quản lý mượn/trả sách
    </h3>
    
    <div class="btn-group shadow-sm">
      <button class="btn btn-white border" [class.active]="filterStatus === 'all'" (click)="filterStatus = 'all'">Tất cả</button>
      <button class="btn btn-white border" [class.active]="filterStatus === 'borrowing'" (click)="filterStatus = 'borrowing'">Đang mượn</button>
      <button class="btn btn-white border" [class.active]="filterStatus === 'returned'" (click)="filterStatus = 'returned'">Đã trả</button>
    </div>
  </div>

  <div class="card border-0 shadow-sm overflow-hidden">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0 bg-white">
        <thead class="table-light">
          <tr>
            <th class="ps-4 py-3">Thành viên</th>
            <th class="py-3">Tên sách</th>
            <th class="py-3">Ngày mượn</th>
            <th class="py-3">Ngày trả</th>
            <th class="py-3 text-center">Trạng thái</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of filteredBorrows">
            <td class="ps-4">
              <div class="fw-bold text-dark">{{ item.username }}</div>
              <div class="text-muted small">{{ item.email }}</div>
            </td>
            <td>
              <span class="text-primary fw-medium">{{ item.book_title }}</span>
            </td>
            <td>{{ item.borrow_date | date:'dd/MM/yyyy HH:mm' }}</td>
            <td>
              <span *ngIf="item.return_date">{{ item.return_date | date:'dd/MM/yyyy HH:mm' }}</span>
              <span *ngIf="!item.return_date" class="text-muted small italic">Chưa trả</span>
            </td>
            <td class="text-center">
              <span *ngIf="!item.return_date" class="badge bg-warning text-dark px-3 rounded-pill">
                <i class="bi bi-clock-history me-1"></i> Đang mượn
              </span>
              <span *ngIf="item.return_date" class="badge bg-success px-3 rounded-pill">
                <i class="bi bi-check-circle me-1"></i> Đã trả
              </span>
            </td>
          </tr>

          <tr *ngIf="filteredBorrows.length === 0">
            <td colspan="5" class="text-center py-5 text-muted">
              Không có dữ liệu mượn sách nào.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>